"use strict";
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
var _this = this;
exports.__esModule = true;
var XMLToForm_1 = require("./XMLToForm");
var StorageManager = require("./StorageManager");
var sinon = require("sinon");
var XML_ICS205A = '<?xml version="1.0"?> <RMS_Express_Form> <form_parameters> <xml_file_version>1.0</xml_file_version> <rms_express_version>1.5.12.0</rms_express_version> <submission_datetime>20180517200348</submission_datetime> <senders_callsign>W7SRG</senders_callsign> <grid_square>CN87XP</grid_square> <display_form>ICS205A_Viewer.html</display_form> <reply_template></reply_template> </form_parameters> <variables> <msgto></msgto> <msgcc></msgcc> <msgsender>W7SRG</msgsender> <msgsubject></msgsubject> <msgbody></msgbody> <msgp2p>False</msgp2p> <msgisreply>False</msgisreply> <msgisforward>False</msgisforward> <msgisacknowledgement>False</msgisacknowledgement> <msgseqnum>5</msgseqnum> <incident_name>Time to troll connor</incident_name> <datefrom>woah</datefrom> <dateto>woah</dateto> <timefrom>woah</timefrom> <timeto>woah</timeto> <assignment1>woah</assignment1> <name1>woah</name1> <method1>woah</method1> <assignment2>woah</assignment2> <name2>woah</name2> <method2>woah</method2> <assignment3>woah</assignment3> <name3>woah</name3> <method3>woah</method3> <assignment4>woah</assignment4> <name4>woah</name4> <method4>woah</method4> <assignment5>woah</assignment5> <name5>woah</name5> <method5>woah</method5> <assignment6>woah</assignment6> <name6>woah</name6> <method6>woah</method6> <assignment7>woah</assignment7> <name7>woah</name7> <method7>woah</method7> <assignment8>woah</assignment8> <name8>woah</name8> <method8>woah</method8> <assignment9>woah</assignment9> <name9>woah</name9> <method9>woah</method9> <assignment10>woah</assignment10> <name10>woah</name10> <method10>woah</method10> <assignment11>woah</assignment11> <name11>woah</name11> <method11>woah</method11> <assignment12>woah</assignment12> <name12>woah</name12> <method12>woah</method12> <assignment13>woah</assignment13> <name13>woah</name13> <method13>woah</method13> <assignment14>woah</assignment14> <name14>woah</name14> <method14>woah</method14> <assignment15>woah</assignment15> <name15>woah</name15> <method15>woah</method15> <assignment16>woah</assignment16> <name16>woah</name16> <method16>woah</method16> <assignment17>woah</assignment17> <name17>woah</name17> <method17>woah</method17> <assignment18>woah</assignment18> <name18>woah</name18> <method18>woah</method18> <assignment19>woah</assignment19> <name19>woah</name19> <method19>woah</method19> <assignment20>woah</assignment20> <name20>woah</name20> <method20>woah</method20> <submit>Submit</submit> <preparedname>woah</preparedname> <activitydatetime1>woah</activitydatetime1> </variables> </RMS_Express_Form>';
var HTML_ICS205A = '<style>.grid:after,[class*=col-],[class*=grid]{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}[class*=col-]{float:left;min-height:1px;padding-right:20px}[class*=col-] [class*=col-]:last-child{padding-right:0}.grid{width:100%;max-width:1140px;min-width:748px;margin:0 auto;overflow:hidden}.grid:after{content:"";display:table;clear:both}.grid-pad{padding-top:20px;padding-left:20px;padding-right:0}.col-1-1{width:100%}.col-1-2{width:50%}.col-4-12{width:33.33%}.col-3-12{width:25%}.col-1-12{width:8.33%}.col-5-12{width:41.66%}.push-4-12{margin-left:33.33%}@media handheld,only screen and (max-width:767px){.grid{width:100%;min-width:0;margin-left:0;margin-right:0;padding-left:20px;padding-right:10px}[class*=col-]{width:auto;float:none;margin:10px 0;padding-left:0;padding-right:10px}[class*=col-] [class*=col-]{padding-right:0}}.text-center{text-align:center}.description-modal{display:none;position:fixed;z-index:1;left:0;top:0;width:100%;height:100%;overflow:auto;background-color:#000;background-color:rgba(0,0,0,.4)}.modal-content{background-color:#fefefe;margin:15% auto;padding:0 20px;border:1px solid #888;width:80%}.modal-content *{font-family:Arial,Helvetica,sans-serif}.modal-close{color:#aaa;float:right;font-size:28px;font-weight:700}.modal-close:focus,.modal-close:hover{color:#000;text-decoration:none;cursor:pointer}.ics-controls{border:1px #000 solid;background-color:#cc94f3;padding:10px}.ics-controls-grid{display:none}.ics-controls h5,p{margin:0 2px}.ics-controls p{font-size:small}.ics-container{border:1px #000 solid;padding:6px;background-color:#fafaff}.ics-container *{font-family:Arial,Helvetica,sans-serif;font-size:small}.ics-table{border:1px solid #000;width:100%}.ics-table th{background:#ddd}.ics-table input{width:100%}.ics_input{width:100%;resize:none}.ics-first-row{min-height:100px}.ics_Header{background-color:#ffc;border:1px solid #000;padding:6px;margin:0}.ics_OperationPeriod input{max-width:100%}html{font-size:calc(1em + .25vw);text-rendering:optimizeLegibility}.invalid{background:#ffa07a}</style><script>function validate(){for(var e=document.querySelectorAll(".ics_input[required]"),t=!0,a=0;a<e.length;a++){var i=e[a],l=!0;switch(i.type){case"text":case"textarea":0===i.value.trim().length&&(l=!1);break;case"select-one":0===i.options[i.selectedIndex].value.trim().length&&(l=!1)}l?i.classList.remove("invalid"):(t=!1,i.classList.add("invalid"),console.log(i+" is invalid"))}return t}</script><script>function bindInputs(){var e=document.querySelectorAll(".ics_input");for(var t in e){var a=e[t];switch(a.type){case"text":a.setAttribute("value",a.value);break;case"textarea":a.innerHTML=a.value;break;case"select-one":a.options[a.selectedIndex].setAttribute("selected","selected")}}}</script><script>function validate(){for(var e=document.querySelectorAll(".ics_input[required]"),t=!0,a=0;a<e.length;a++){var i=e[a],l=!0;switch(i.type){case"text":case"textarea":0===i.value.trim().length&&(l=!1);break;case"select-one":0===i.options[i.selectedIndex].value.trim().length&&(l=!1)}l?i.classList.remove("invalid"):(t=!1,i.classList.add("invalid"),console.log(i+" is invalid"))}return t}</script><script>window.addEventListener("load",function(){var n,o,e=document.querySelector(".ics-controls-grid"),t=document.querySelector(".ics_BindData"),c=document.querySelector(".lastSaved");window.require&&window.require("electron")||(e.style.display="block"),o||(c.innerHTML="Never"),t.addEventListener("click",function(){if(console.log("click"),validate()){function e(){n++,c.innerHTML=n+(1<n?" seconds ago":" second ago")}n=0,o&&clearInterval(o),o=setInterval(e,1e3),e(),bindInputs()}})})</script><div class=\'grid grid-pad ics-controls-grid\'><div class=\'text-center col-1-1 ics-controls\'><h5>**This form is intended to be viewed with BC_ICS**</h5><p>To operate without BC_ICS, complete form as normal then click the button below</p><br><button class=\'ics_BindData\'>Bind Data to Form</button><p><span>[</span><span>Last Saved:&nbsp;</span><span class=\'lastSaved\'>Never</span><span>]</span></p><br><p><strong>Then save the web page via your browser\'s option menu or using the shortcut Ctrl+S</strong></p><p>This will provide you with an HTML file that can be shared</p></div></div><div class=\'invalid\' display=\'gone\'></div><div class=\'grid grid-pad\'><script>window.addEventListener("load",function(){var e=document.querySelector("#formInfoLink"),n=document.querySelector(".description-modal"),t=document.querySelector(".modal-close");e.addEventListener("click",function(){n.style.display="block"}),t.addEventListener("click",function(){n.style.display="none"}),window.addEventListener("click",function(e){e.target===n&&(n.style.display="none")})})</script><div class=\'text-center col-1-1 ics_Header\'><div class=\'col-4-12 ics_Title push-4-12\'><span>COMMUNICATIONS LIST</span></div><div class=\'col-1-12 ics_Id\'><span>ICS205A</span></div><div class=\'col-1-12 ics_Version\'><span>Ver 7</span></div><div class=\'col-1-12\'><a href=\'#\' id=\'formInfoLink\'>Form Info</a></div></div><div class=\'text-center ics-container col-1-2 ics-first-row ics_IncidentName\'><span>1. Incident Name*</span><br><input class=\'ics_input\' id=\'incident_name\' type=\'text\' required=\'required\'></div><div class=\'text-center ics-container col-1-2 ics-first-row ics_OperationPeriod\'><span>2. Operational Period*</span><div><div class=\'col-3-12\'><span>Date From:</span></div><div class=\'col-3-12\'><input class=\'ics_input\' id=\'datefrom\' type=\'text\' required=\'required\'></div><div class=\'col-3-12\'><span>Date To:</span></div><div class=\'col-3-12\'><input class=\'ics_input\' id=\'dateto\' type=\'text\' required=\'required\'></div></div><div><div class=\'col-3-12\'><span>Time From:</span></div><div class=\'col-3-12\'><input class=\'ics_input\' id=\'timefrom\' type=\'text\' required=\'required\'></div><div class=\'col-3-12\'><span>Time To:</span></div><div class=\'col-3-12\'><input class=\'ics_input\' id=\'timeto\' type=\'text\' required=\'required\'></div></div></div><div class=\'text-center col-1-1 ics-container ics_BasicLocalCommunicationInformation\'><span>3. Basic Local Communication Information<table border=\'1\' class=\'ics-table\'><tr><th style=\'width:25%\'>Assignment</th><th style=\'width:25%\'>Name</th><th style=\'width:50%\'>Method(s) of contact: radio frequency, phone, cell#, etc.</th></tr><tr><td><input class=\'ics_input\' id=\'assignment1\' type=\'text\'></td><td><input class=\'ics_input\' id=\'name1\' type=\'text\'></td><td><input class=\'ics_input\' id=\'method1\' type=\'text\'></td></tr><tr><td><input class=\'ics_input\' id=\'assignment2\' type=\'text\'></td><td><input class=\'ics_input\' id=\'name2\' type=\'text\'></td><td><input class=\'ics_input\' id=\'method2\' type=\'text\'></td></tr><tr><td><input class=\'ics_input\' id=\'assignment3\' type=\'text\'></td><td><input class=\'ics_input\' id=\'name3\' type=\'text\'></td><td><input class=\'ics_input\' id=\'method3\' type=\'text\'></td></tr><tr><td><input class=\'ics_input\' id=\'assignment4\' type=\'text\'></td><td><input class=\'ics_input\' id=\'name4\' type=\'text\'></td><td><input class=\'ics_input\' id=\'method4\' type=\'text\'></td></tr><tr><td><input class=\'ics_input\' id=\'assignment5\' type=\'text\'></td><td><input class=\'ics_input\' id=\'name5\' type=\'text\'></td><td><input class=\'ics_input\' id=\'method5\' type=\'text\'></td></tr><tr><td><input class=\'ics_input\' id=\'assignment6\' type=\'text\'></td><td><input class=\'ics_input\' id=\'name6\' type=\'text\'></td><td><input class=\'ics_input\' id=\'method6\' type=\'text\'></td></tr><tr><td><input class=\'ics_input\' id=\'assignment7\' type=\'text\'></td><td><input class=\'ics_input\' id=\'name7\' type=\'text\'></td><td><input class=\'ics_input\' id=\'method7\' type=\'text\'></td></tr><tr><td><input class=\'ics_input\' id=\'assignment8\' type=\'text\'></td><td><input class=\'ics_input\' id=\'name8\' type=\'text\'></td><td><input class=\'ics_input\' id=\'method8\' type=\'text\'></td></tr><tr><td><input class=\'ics_input\' id=\'assignment9\' type=\'text\'></td><td><input class=\'ics_input\' id=\'name9\' type=\'text\'></td><td><input class=\'ics_input\' id=\'method9\' type=\'text\'></td></tr><tr><td><input class=\'ics_input\' id=\'assignment10\' type=\'text\'></td><td><input class=\'ics_input\' id=\'name10\' type=\'text\'></td><td><input class=\'ics_input\' id=\'method10\' type=\'text\'></td></tr><tr><td><input class=\'ics_input\' id=\'assignment11\' type=\'text\'></td><td><input class=\'ics_input\' id=\'name11\' type=\'text\'></td><td><input class=\'ics_input\' id=\'method11\' type=\'text\'></td></tr><tr><td><input class=\'ics_input\' id=\'assignment12\' type=\'text\'></td><td><input class=\'ics_input\' id=\'name12\' type=\'text\'></td><td><input class=\'ics_input\' id=\'method12\' type=\'text\'></td></tr><tr><td><input class=\'ics_input\' id=\'assignment13\' type=\'text\'></td><td><input class=\'ics_input\' id=\'name13\' type=\'text\'></td><td><input class=\'ics_input\' id=\'method13\' type=\'text\'></td></tr><tr><td><input class=\'ics_input\' id=\'assignment14\' type=\'text\'></td><td><input class=\'ics_input\' id=\'name14\' type=\'text\'></td><td><input class=\'ics_input\' id=\'method14\' type=\'text\'></td></tr><tr><td><input class=\'ics_input\' id=\'assignment15\' type=\'text\'></td><td><input class=\'ics_input\' id=\'name15\' type=\'text\'></td><td><input class=\'ics_input\' id=\'method15\' type=\'text\'></td></tr><tr><td><input class=\'ics_input\' id=\'assignment16\' type=\'text\'></td><td><input class=\'ics_input\' id=\'name16\' type=\'text\'></td><td><input class=\'ics_input\' id=\'method16\' type=\'text\'></td></tr><tr><td><input class=\'ics_input\' id=\'assignment17\' type=\'text\'></td><td><input class=\'ics_input\' id=\'name17\' type=\'text\'></td><td><input class=\'ics_input\' id=\'method17\' type=\'text\'></td></tr><tr><td><input class=\'ics_input\' id=\'assignment18\' type=\'text\'></td><td><input class=\'ics_input\' id=\'name18\' type=\'text\'></td><td><input class=\'ics_input\' id=\'method18\' type=\'text\'></td></tr><tr><td><input class=\'ics_input\' id=\'assignment19\' type=\'text\'></td><td><input class=\'ics_input\' id=\'name19\' type=\'text\'></td><td><input class=\'ics_input\' id=\'method19\' type=\'text\'></td></tr><tr><td><input class=\'ics_input\' id=\'assignment20\' type=\'text\'></td><td><input class=\'ics_input\' id=\'name20\' type=\'text\'></td><td><input class=\'ics_input\' id=\'method20\' type=\'text\'></td></tr></table></span></div><div class=\'col-1-1 ics-container ics_Footer\'><div class=\'col-1-12\'></div><div class=\'col-5-12\'><span>4. Approved by (CUL) Name:*</span><input class=\'ics_input\' id=\'preparedname\' type=\'text\' required=\'required\'></div><div class=\'col-5-12\'><span>Date/Time:*</span><input class=\'ics_input\' id=\'activitydatetime1\' type=\'text\' required=\'required\' style=\'width:20%\'></div><div class=\'col-1-12\'></div></div><span>*required</span></div><div class=\'description-modal\'><div class=\'modal-content\'><div class=\'modal-header\'><span class=\'modal-close\'>&times;</span><div class=\'ics_Description\'><h2>ICS 205A Communications List</h2><p><strong>Purpose.</strong></p><p>The Communications List (ICS 205A) records methods of contact for incident personnel. While the Incident Radio Communications Plan (ICS 205) is used to provide information on all radio frequencies down to the Division/Group level, the ICS 205A indicates all methods of contact for personnel assigned to the incident (radio frequencies, phone numbers, pager numbers, etc.), and functions as an incident directory. here are some changes.</p><p><strong>Preparation.</strong></p><p>The ICS 205A can be filled out during check-in and is maintained and distributed by Communications Unit personnel. This form should be updated each operational period.</p><p><strong>Distribution.</strong></p><p>The ICS 205A is distributed within the ICS organization by the Communications Unit, and posted as necessary. All completed original forms must be given to the Documentation Unit. If this form contains sensitive information such as cell phone numbers, it should be clearly marked in the header that it contains sensitive information and is not for public release.</p><p><strong>Notes:</strong></p><p>The ICS 205A is an optional part of the Incident Action Plan (IAP). This optional form is used in conjunction with the ICS 205. If additional pages are needed, use a blank ICS 205A and repaginate as needed.</p></div></div></div></div>';
var sandbox;
describe('XMLToForm should ', function () {
    beforeEach(function () {
        sandbox = sinon.createSandbox();
    });
    afterEach(function () {
        sandbox.restore();
    });
    it('resolve true to be true', function () {
        expect(true).toBe(true);
    });
    it('works with ICS205A', function () { return __awaiter(_this, void 0, void 0, function () {
        var stub_read;
        return __generator(this, function (_a) {
            switch (_a.label) {
                case 0:
                    stub_read = sandbox.stub(StorageManager, 'read');
                    stub_read.withArgs('/forms', 'bcics_ICS205A').resolves(HTML_ICS205A);
                    return [4 /*yield*/, XMLToForm_1.convertFromXML(XML_ICS205A).then(function (result) {
                            expect(result).toEqual(EXPECTED);
                        })];
                case 1:
                    _a.sent();
                    return [2 /*return*/];
            }
        });
    }); });
});
